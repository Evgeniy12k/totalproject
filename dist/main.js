(()=>{"use strict";document.addEventListener("input",(e=>{e.target.matches(".calc-item ")&&(e.target.value=e.target.value.replace(/\D/g,""))}));const e=document.createElement("div");e.style.cssText="color: green";const t=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=document.querySelector("#command"),n=e=>{const t=e.target;if(t.matches("img")){let e=t.src,o=t.dataset.img;t.dataset.img=e,t.src=o}};o.addEventListener("mouseover",n),o.addEventListener("mouseout",n),function(e){let t=setInterval(c,1e3),o=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),l=document.querySelector("#timer-seconds");function c(){let c=function(){let t=(new Date(e).getTime()-(new Date).getTime())/1e3,o=Math.floor(t%60),n=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/60/60),minutes:n,seconds:o}}();function a(e){return e<10?"0"+e:e}c.timeRemaining>0&&(o.textContent=a(c.hours),n.textContent=a(c.minutes),l.textContent=a(c.seconds)),c.timeRemaining<0&&(clearInterval(t,1e3),o.textContent="00",n.textContent="00",l.textContent="00")}c()}("31 december 2020"),(()=>{document.querySelector(".menu");const e=document.querySelector("menu"),t=(document.querySelector(".close-btn"),document.querySelector("body")),o=e.querySelectorAll("ul>li>a"),n=()=>{e.classList.toggle("active-menu")};t.addEventListener("click",(e=>{let t=e.target,o=e.target;t=t.closest(".menu"),(t||o.classList.contains("close-btn")||o.classList.contains("ul>li>a"))&&n()})),o.forEach((e=>e.addEventListener("click",n)))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn");let o=document.querySelector(".popup-content");t.forEach((t=>{t.addEventListener("click",(()=>{if(window.innerWidth>768){o.style.opacity="0";let t=0;const n=setInterval((()=>{t+=.1,o.style.opacity=`${t}`,"1"===o.style.opacity&&clearInterval(n)}),40);e.style.display="block"}else e.style.display="block",o.style.opacity="1"}))}));const n=document.getElementById("form3-name"),l=document.getElementById("form3-phone"),c=document.getElementById("form3-email");e.addEventListener("click",(t=>{let a=t.target;if(a.classList.contains("popup-close"))if(window.innerWidth>768){o.style.opacity="1";let t=1;const a=setInterval((()=>{t-=.1,o.style.opacity=`${t}`,"-0.1"===o.style.opacity&&(n.value="",l.value="",c.value="",e.style.display="none",clearInterval(a))}),40)}else e.style.display="none";else a=a.closest(".popup"),a||(e.style.display="none")})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup")?(n.value="",l.value="",c.value="",e.style.display="none"):(o=o.closest(".popup"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,l)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(l)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content");let o=document.querySelector(".portfolio-dots");for(let t=0;t<e.length;t++){const e=document.createElement("li");0===t&&e.classList.add("dot-active"),e.classList.add("dot"),o.append(e)}const n=document.querySelectorAll(".dot");let l,c=0;const a=(e,t,o)=>{e[t].classList.remove(o)},r=(e,t,o)=>{e[t].classList.add(o)},s=()=>{a(e,c,"portfolio-item-active"),a(n,c,"dot-active"),c++,c>=e.length&&(c=0),r(e,c,"portfolio-item-active"),r(n,c,"dot-active")},i=(e=3e3)=>{l=setInterval(s,e)};t.addEventListener("click",(t=>{t.preventDefault();let o=t.target;o.matches(".portfolio-btn, .dot")&&(a(e,c,"portfolio-item-active"),a(n,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&n.forEach(((e,t)=>{e===o&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),r(e,c,"portfolio-item-active"),r(n,c,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(l)})),t.addEventListener("mouseleave",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),l=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),a=document.getElementById("total");t.addEventListener("change",(t=>{const r=t.target;(r.matches("select")||r.matches("input"))&&(()=>{let t=0,r=1,s=1;const i=o.options[o.selectedIndex].value;let u=+n.value;c.value>1&&(r+=(c.value-1)/10),l.value&&l.value<5?s*=2:l.value&&l.value<10&&(s*=1.5),i&&u&&(t=e*i*u*r*s),a.textContent=Math.floor(t)})()}))})(100),(()=>{const o=document.querySelectorAll("form"),n=document.querySelectorAll("input");for(let l=0;l<o.length;l++)o[l].addEventListener("submit",(c=>{c.preventDefault(),o[l].appendChild(e),e.textContent="Загрузка.";const a=new FormData(o[l]);let r={};a.forEach(((e,t)=>{r[t]=e})),t(r).then((t=>{if(200!==t.status)throw new Error("status network not 200");e.textContent=" Спасибо! мы скоро с вами свяжемся!",setTimeout((()=>{e.textContent=""}),1e3),setTimeout((()=>{popup.style.display="none"}),3e3),n.forEach((e=>{e.value=""}))})).catch((t=>{e.textContent="Что-то пошло  не так.."}))}));document.addEventListener("input",(e=>{let t=e.target;(t.matches(".form-email")||t.matches(".top-form form-email"))&&(t.value=t.value.replace(/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{3,4})$/gi,""))})),document.addEventListener("input",(e=>{let t=e.target;(t.matches(".form-name")||t.matches(".mess")||t.matches(".top-form-name"))&&(t.value=t.value.replace(/[^А-Яа-яЁе \,\.\!\? ]/gi,""))})),document.addEventListener("input",(e=>{let t=e.target;t.matches(".form-phone")&&t.value.length>15&&""!=t.value.length&&alert("введите правильный номер"),t.value=t.value.replace(/[^+0-9]{3,12}$/)}))})()})();